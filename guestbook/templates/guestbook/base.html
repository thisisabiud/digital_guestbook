{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full overflow-hidden">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Digital Guestbook - Share your thoughts and signatures">
    <meta name="theme-color" content="#1D4ED8" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1E293B" media="(prefers-color-scheme: dark)">
    
    <link rel="icon" type="image/png" href="{% static 'favicon.png' %}">
    <title>{% block title %}Digital Guestbook{% endblock %}</title>

    <!-- Preload Assets -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link href="{% static 'css/output.css' %}" rel="stylesheet">

</head>

<body class="bg-white dark:bg-gray-900 h-full overflow-hidden flex flex-col">
    <!-- Page Loader -->
    <div id="page-loader" 
         class="fixed inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-50
                flex items-center justify-center transition-opacity duration-500">
        <div class="relative">
            <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent"></div>
            <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent
                        absolute inset-0 rotate-45"></div>
        </div>
    </div>

    {% include 'guestbook/header.html' %}

    <main class="min-h-screen pt-16">
        {% block content %}{% endblock %}
    </main>

    {% include 'guestbook/footer.html' %}

    {% block scripts %}{% endblock %}

    <!-- Scroll to Top -->
    <button id="scrollToTop" 
            class="fixed bottom-8 right-8 p-3 rounded-full 
                   bg-blue-500 hover:bg-blue-600 
                   text-white shadow-lg hover:shadow-xl
                   transform transition-all duration-300 
                   opacity-0 translate-y-8 scale-90
                   hover:scale-100 active:scale-95
                   focus:outline-none focus:ring-2 focus:ring-blue-400
                   dark:bg-blue-600 dark:hover:bg-blue-700">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 15l7-7 7 7"/>
        </svg>
    </button>

    <script>
        // Page Loader
        window.addEventListener('load', () => {
            document.getElementById('page-loader').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('page-loader').style.display = 'none';
            }, 500);
        });

        // Scroll to Top
        const scrollButton = document.getElementById('scrollToTop');
        let lastScrollTop = 0;
        
        window.onscroll = () => {
            const st = window.pageYOffset || document.documentElement.scrollTop;
            if (st > lastScrollTop && st > 200) {
                scrollButton.classList.replace('opacity-0', 'opacity-100');
                scrollButton.classList.replace('translate-y-8', 'translate-y-0');
            } else if (st < 200) {
                scrollButton.classList.replace('opacity-100', 'opacity-0');
                scrollButton.classList.replace('translate-y-0', 'translate-y-8');
            }
            lastScrollTop = st;
        };
        
        scrollButton.onclick = () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            scrollButton.classList.add('scale-90');
            setTimeout(() => scrollButton.classList.remove('scale-90'), 300);
        };
    </script>
</body>

</html>